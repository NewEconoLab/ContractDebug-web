webpackJsonp([3],{GhMT:function(t,e,n){var i=n("edFB");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("1c93aef9",i,!0)},edFB:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.debug-title[data-v-483b11dc] {\n  display: flex;\n  padding-bottom: 30px;\n}\n.debug-title .btn-list[data-v-483b11dc] {\n  padding-left: 30px;\n}\n.debug-title .changehash-content[data-v-483b11dc] {\n  text-align: center;\n}\n.debug-title .changehash-content .change-box[data-v-483b11dc] {\n  width: 362px;\n  height: 30px;\n  margin: 0 auto;\n  background: #292a30;\n  border: 1px solid #ffffff;\n  border-radius: 3px 0px 3px 3px 3px;\n  position: relative;\n}\n.debug-title .changehash-content .change-box .change-select[data-v-483b11dc] {\n  width: 100%;\n  height: 100%;\n  border: none;\n  background: none;\n  color: #fff;\n  outline: none;\n}\n.debug-title .changehash-content .change-box .change-select option[data-v-483b11dc] {\n  background: #292a30;\n  color: #fff;\n}\n.debug-title .changehash-content .change-box .change-input[data-v-483b11dc] {\n  width: 95%;\n  height: 100%;\n  border: none;\n  background: #292a30;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n  outline: none;\n  text-indent: 20px;\n}\n.debug-title .changehash-content .change-box .change-input[data-v-483b11dc]::placeholder {\n  color: #fff;\n}\n.debug-title .changehash-content .changehash-btn[data-v-483b11dc] {\n  margin-top: 50px;\n  margin-bottom: 30px;\n}\n.debug-panel[data-v-483b11dc] {\n  display: flex;\n}\n.debug-panel .code[data-v-483b11dc] {\n  flex: 1;\n  padding-right: 25px;\n}\n.debug-panel .code .code-content[data-v-483b11dc] {\n  height: 100%;\n  max-height: 500px;\n  overflow: auto;\n}\n.debug-panel .code .p-title[data-v-483b11dc] {\n  border-bottom: 3px solid #3d3d3d;\n  width: 100%;\n  line-height: 55px;\n}\n.debug-panel .code .p-title .title[data-v-483b11dc] {\n  padding-left: 25px;\n  font-family: NotoSansHans-Regular;\n  font-size: 14px;\n  color: #b5b5b5;\n  display: inline-block;\n}\n.debug-panel .code .p-title .btn-list[data-v-483b11dc] {\n  float: right;\n  margin-top: 15px;\n  margin-right: 25px;\n}\n.debug-panel .debug-info[data-v-483b11dc] {\n  width: 400px;\n  max-width: 400px;\n  padding-right: 30px;\n}\n.debug-panel .debug-info .value-content[data-v-483b11dc] {\n  overflow: auto;\n  max-width: 350px;\n  width: 400px;\n  max-height: 100px;\n  height: 50px;\n  color: #fff;\n  margin-left: 5px;\n  margin-right: 5px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.debug-panel .debug-info .panel-content[data-v-483b11dc] {\n  overflow: auto;\n  max-width: 350px;\n  width: 400px;\n  max-height: 200px;\n  height: 200px;\n  color: #fff;\n  margin-left: 5px;\n  margin-right: 5px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.debug-panel .debug-info .panel-content .content-btns[data-v-483b11dc] {\n  padding-top: 5px;\n  justify-content: flex-end;\n}\n.debug-panel .debug-info .panel-content input[data-v-483b11dc] {\n  width: 100%;\n  background: #292a30;\n  border: 1px solid #b5b5b5;\n  box-shadow: 0 2px 4px 0 #023169;\n  border-radius: 3px 0px 3px 3px 3px;\n  height: 30px;\n  color: #fff;\n}\n.debug-panel .debug-info .panel-content ul[data-v-483b11dc] {\n  padding-inline-start: 0px;\n}\n.debug-panel .avm[data-v-483b11dc] {\n  width: 400px;\n  max-width: 400px;\n  padding-right: 30px;\n}\n.debug-panel .avm .panel-content[data-v-483b11dc] {\n  margin-left: 20px;\n  margin-right: 20px;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  color: #fff;\n}\n.debug-panel .avm .panel-content .content-btns[data-v-483b11dc] {\n  padding-top: 20px;\n  justify-content: flex-end;\n}\n.debug-panel .avm .panel-content input[data-v-483b11dc] {\n  width: 100%;\n  background: #292a30;\n  border: 1px solid #b5b5b5;\n  box-shadow: 0 2px 4px 0 #023169;\n  border-radius: 3px 0px 3px 3px 3px;\n  height: 30px;\n  color: #fff;\n}\n.debug-panel .panel-form[data-v-483b11dc] {\n  display: flex;\n}\n.debug-panel .panel-form .form-lable[data-v-483b11dc] {\n  font-family: NotoSansHans-Regular;\n  font-size: 14px;\n  color: #ffffff;\n  width: 137px;\n  padding-bottom: 20px;\n}\n.debug-panel .panel-form .form-content[data-v-483b11dc] {\n  width: 370px;\n  padding-bottom: 20px;\n}\n.debug-panel .panel-form .form-content input[data-v-483b11dc] {\n  background: #292a30;\n  border: 1px solid #ffffff;\n  box-shadow: 0 2px 4px 0 #023169;\n  border-radius: 3px 0px 3px 3px 3px;\n  width: 260px;\n}\n.debug-panel .panel-form label[data-v-483b11dc] {\n  box-sizing: border-box;\n  display: inline-block;\n  padding: 0 10px;\n  margin-bottom: 10px;\n  text-align: center;\n  margin-right: 15px;\n  font-size: 14px;\n  color: #ffffff;\n  font-weight: 400;\n  border-radius: 3px;\n  position: relative;\n}\n.debug-panel .panel-form label .select-img[data-v-483b11dc] {\n  display: inline-block;\n  width: 22px;\n  height: 22px;\n  margin-right: 6px;\n  vertical-align: middle;\n  border: 1px solid #fff;\n  border-radius: 50%;\n}\n.debug-panel .panel-form label .select-img img[data-v-483b11dc] {\n  display: none;\n  width: 22px;\n  height: 22px;\n}\n.debug-panel .panel-form label span[data-v-483b11dc] {\n  vertical-align: middle;\n}\n.debug-panel .panel-form label input[data-v-483b11dc] {\n  visibility: hidden;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.debug-panel .panel-form label[data-v-483b11dc]:last-child {\n  margin-right: 0;\n}\n.debug-panel .panel-form label.checked-input .select-img[data-v-483b11dc] {\n  border: none;\n}\n.debug-panel .panel-form label.checked-input .select-img img[data-v-483b11dc] {\n  display: block;\n}\n",""])},"i+TE":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.div=t,this.ul=document.createElement("ul"),this.div.appendChild(this.ul)}return t.prototype.paresJson=function(){},t.prototype.showTree=function(t,e,n){if(e.items.length>0)for(var i=this,a=0,o=e.items;a<o.length;a++){var r=o[a];!function(e){if(e.items.length>0){var a=document.createElement("li"),o=document.createElement("ul");a.textContent=e.title+":",a.appendChild(o),t.appendChild(a),i.showTree(o,e,n)}else{var a=document.createElement("li");if(a.textContent=e.title+":"+e.value,t.appendChild(a),"ByteArray"===e.title&&e.value){var r=document.createElement("ul");r.textContent=e.value;var l=e.value.hexToBytes(),d=document.createElement("li"),s=ThinNeo.Helper.Bytes2String(l);if(d.textContent="asStr : "+s,r.appendChild(d),e.value.length<=8){var c=Neo.BigInteger.fromUint8Array(l),p=document.createElement("li");p.textContent="asNum : "+c.toString(),r.appendChild(p)}if(40==e.value.length){var u=ThinNeo.Helper.GetAddressFromScriptHash(l),h=document.createElement("li");h.textContent="asAddr : "+u,r.appendChild(h)}a.onclick=function(){for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}}}}(r)}},t}();e.TreeViewItems=i;var a=function(){function t(t,e){this.title=t,this.value=e,this.items=[]}return t.prototype.addChildren=function(t){this.items.push(t)},t}();e.TreeView=a},oIGh:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=this&&this.__decorate||function(t,e,n,i){var a,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(r=(o<3?a(r):o>3?a(e,n,r):a(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(a,o){function r(t){try{d(i.next(t))}catch(t){o(t)}}function l(t){try{d(i.throw(t))}catch(t){o(t)}}function d(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(r,l)}d((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(a)throw new TypeError("Generator is already executing.");for(;d;)try{if(a=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return d.label++,{value:n[1],done:!1};case 5:d.label++,o=n[1],n=[0];continue;case 7:n=d.ops.pop(),d.trys.pop();continue;default:if(r=d.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){d=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){d.label=n[1];break}if(6===n[0]&&d.label<r[1]){d.label=r[1],r=n;break}if(r&&d.label<r[2]){d.label=r[2],d.ops.push(n);break}r[2]&&d.ops.pop(),d.trys.pop();continue}n=e.call(t,d)}catch(t){n=[6,t],o=0}finally{a=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,r,l,d={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(e,"__esModule",{value:!0});var l=n("c+8m"),d=n("/5sW"),s=n("VKSY"),c=n("6nHw"),p=n("i+TE"),u=n("r84I"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txlist=[],e.txid="",e.dumpinfo="",e.dumpstr="",e.oplist=[],e.CalcStack={},e.AltStack={},e.contractFiles={},e.stackarr=[],e}return i(e,t),e.prototype.mounted=function(){var t=document.getElementById("csharp-code"),e=document.getElementById("avm-code"),n={};n.lineNumbers=!0,n.mode="text/x-csharp",n.dragDrop=!0,n.readOnly=!0,n.theme="monokai",this.cEditor=CodeMirror.fromTextArea(t,n),this.fulllogEditor=CodeMirror.fromTextArea(e,n),this.initHashList(),u.services.routerParam.debug&&(this.txid=u.services.routerParam.debug.txid,this.initDebugInfo())},e.prototype.initHashList=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return[4,s.tools.wwwtool.getTxCallContract(c.LoginInfo.getCurrentAddress())];case 1:return t=e.sent(),this.txlist=t,this.txlist=this.txlist.map(function(t){return t.txidstr=[t.txid.substring(0,4),t.txid.substring(t.txid.length-4)].join("..."),t}),[2]}})})},e.prototype.initDebugInfo=function(){return o(this,void 0,void 0,function(){var t,e,n,i,a,o,l,d,c,p=this;return r(this,function(r){switch(r.label){case 0:return[4,s.tools.wwwtool.getDumpInfoByTxid(this.txid)];case 1:t=r.sent(),this.dumpinfo=t.dimpInfo,e=new nid.LZMA,n=this.dumpinfo.hexToBytes(),i="",a=null;try{o=e.decode(n),i=ThinNeo.Helper.Bytes2String(o),a=JSON.parse(i)}catch(t){return console.log("decode error."+t),[2]}if(null!=a){for(l=ThinNeo.SmartContract.Debug.DumpInfo.FromJson(a),this.simVM=new ThinNeo.Debug.SimVM,this.simVM.Execute(l),d=0;d<l.states.length;d++);this.dumpstr="",c=[],this.dumpScript(this.simVM.regenScript,1),this.fulllogEditor.on("cursorActivity",function(t){p.debug()})}return[2]}})})},e.prototype.debug=function(){var t=this.fulllogEditor.getCursor().line;if(this.stackarr[t]){var e=this.stackarr[t].script,n=this.stackarr[t].op;if(this.showCode(e.hash),this.showStack(n),this.contractFiles[e.hash]&&this.addr){var i=this.addr.GetLineBack(n.addr);this.cEditor.setCursor(i),this.cEditor.addLineClass(i,"background","cursor-line-highight")}}},e.prototype.showStack=function(t){for(var e=document.getElementById("calcstack-content"),n=document.getElementById("altstack-content"),i=document.getElementById("valuetool");e.hasChildNodes();)e.removeChild(e.firstChild);for(;n.hasChildNodes();)n.removeChild(n.firstChild);var a=this.simVM.mapState[t.guid],o=this.simVM.stateClone[a];if(o){this.CalcStack=o.CalcStack.list,this.AltStack=o.AltStack.list;var r=new p.TreeView(""),l=new p.TreeView(""),d=new p.TreeViewItems(e),s=new p.TreeViewItems(n);this.calcStackShow(o.CalcStack.list,r),this.calcStackShow(o.AltStack.list,l),d.showTree(d.ul,r,i),s.showTree(s.ul,l,i)}},e.prototype.calcStackShow=function(t,e){for(var n=0,i=t;n<i.length;n++){var a=i[n];if("Array"===a.type){var o=new p.TreeView("Array");e.addChildren(o),a.subItems.length>0?this.calcStackShow(a.subItems,o):o.value="[]"}else{var o=new p.TreeView(a.type,a.strvalue);e.addChildren(o)}}},e.prototype.showCode=function(t){try{var e=this.contractFiles[t];e?(this.oplist=ThinNeo.Compiler.Avm2Asm.Trans(e.avm.hexToBytes()),this.addr=ThinNeo.Debug.Helper.AddrMap.FromJson(JSON.parse(e.map)),this.cEditor.setValue(e.cs)):this.cEditor.setValue("")}catch(t){this.addr=void 0}},e.prototype.initCode=function(t){return o(this,void 0,void 0,function(){var e,n,i,a,o,l;return r(this,function(r){switch(r.label){case 0:e=0,n=t,r.label=1;case 1:return e<n.length?(i=n[e],[4,s.tools.wwwtool.readOssFile(i,"cs",!1)]):[3,6];case 2:return a=r.sent(),[4,s.tools.wwwtool.readOssFile(i,"avm",!1)];case 3:return o=r.sent(),[4,s.tools.wwwtool.readOssFile(i,"map.json",!1)];case 4:l=r.sent(),this.contractFiles[i]={cs:a,avm:o,map:l},r.label=5;case 5:return e++,[3,1];case 6:return[2]}})})},e.prototype.addAvmStr=function(t){this.dumpstr?this.dumpstr+="\n"+t:this.dumpstr+=t},e.prototype.dumpScript=function(t,e){for(var n="",i=0;i<e;i++)n+="\t";e>1?this.addAvmStr(n+"hash : "+t.hash):this.addAvmStr("hash : "+t.hash),this.stackarr.push(void 0);for(var i=0;i<t.ops.length;i++){if(this.addAvmStr(n+"op : "+t.ops[i].GetHeader()),t.ops[i].GetHeader().includes("APPCALL")){var a=[];console.log(t.ops[i].subScript.GetAllScriptName(a)),console.log(a),this.initCode(a)}null!=t.ops[i].subScript&&this.dumpScript(t.ops[i].subScript,e+1),this.stackarr.push({script:t,op:t.ops[i]})}1===e&&this.fulllogEditor.setValue(this.dumpstr)},e=a([l.default({components:{}})],e)}(d.default);e.default=h},qfqf:function(t,e,n){"use strict";function i(t){n("GhMT")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("oIGh"),o=n.n(a),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"debug-title"},[n("div",{staticClass:"changehash-content"},[n("div",{staticClass:"change-box"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.txid,expression:"txid"}],staticClass:"change-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.txid=e.target.multiple?n:n[0]}}},t._l(t.txlist,function(e){return n("option",{key:e.id,domProps:{value:e.txid}},[t._v(t._s(e.txidstr))])})),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.txid,expression:"txid"}],staticClass:"change-input",attrs:{type:"text",placeholder:"选择历史交易"},domProps:{value:t.txid},on:{input:function(e){e.target.composing||(t.txid=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"btn-list"},[n("v-btn",{on:{onclick:t.initDebugInfo}},[t._v("查询")])],1),t._v(" "),n("div",{staticClass:"btn-list"},[n("v-btn",{attrs:{type:"warn"}},[t._v("帮助")])],1)]),t._v(" "),n("div",{staticClass:"debug-panel"},[n("div",{staticClass:"debug-info"},[n("panel",[n("p-title",{attrs:{title:"CalcStack"}}),t._v(" "),n("div",{staticClass:"panel-content",attrs:{id:"calcstack-content"}})],1),t._v(" "),n("panel",[n("p-title",{attrs:{title:"AltStack"}}),t._v(" "),n("div",{staticClass:"panel-content",attrs:{id:"altstack-content"}})],1),t._v(" "),n("panel",[n("p-title",{attrs:{title:"Value tool"}}),t._v(" "),n("div",{staticClass:"value-content"},[n("div",{attrs:{id:"valuetool"}})])],1)],1),t._v(" "),n("div",{staticClass:"avm"},[n("panel",[n("p-title",{attrs:{title:"AVM"}}),t._v(" "),n("div",{staticClass:"avm-content"},[n("textarea",{attrs:{id:"avm-code"}})])],1)],1),t._v(" "),n("div",{staticClass:"code"},[n("panel",[n("div",{staticClass:"p-title"},[n("div",{staticClass:"title"},[n("div",[n("div",[t._v("文件")])])])]),t._v(" "),n("div",{staticClass:"code-content",attrs:{id:"code-content"}},[n("textarea",{attrs:{id:"csharp-code"}})])])],1)])])},l=[],d={render:r,staticRenderFns:l},s=d,c=n("VU/8"),p=i,u=c(o.a,s,!1,p,"data-v-483b11dc",null);e.default=u.exports}});